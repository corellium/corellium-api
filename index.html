<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>Home - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <input type="text" id="nav-search" placeholder="Search" />
    
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Agent.html">Agent</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Agent.html#appList">appList</a></li><li data-type='method' style='display: none;'><a href="Agent.html#changeFileAttributes">changeFileAttributes</a></li><li data-type='method' style='display: none;'><a href="Agent.html#connectToWifi">connectToWifi</a></li><li data-type='method' style='display: none;'><a href="Agent.html#crashes">crashes</a></li><li data-type='method' style='display: none;'><a href="Agent.html#deleteFile">deleteFile</a></li><li data-type='method' style='display: none;'><a href="Agent.html#disableSSLPinning">disableSSLPinning</a></li><li data-type='method' style='display: none;'><a href="Agent.html#disableUIAutomation">disableUIAutomation</a></li><li data-type='method' style='display: none;'><a href="Agent.html#disconnect">disconnect</a></li><li data-type='method' style='display: none;'><a href="Agent.html#disconnectFromWifi">disconnectFromWifi</a></li><li data-type='method' style='display: none;'><a href="Agent.html#download">download</a></li><li data-type='method' style='display: none;'><a href="Agent.html#enableSSLPinning">enableSSLPinning</a></li><li data-type='method' style='display: none;'><a href="Agent.html#enableUIAutomation">enableUIAutomation</a></li><li data-type='method' style='display: none;'><a href="Agent.html#getProfile">getProfile</a></li><li data-type='method' style='display: none;'><a href="Agent.html#getProp">getProp</a></li><li data-type='method' style='display: none;'><a href="Agent.html#install">install</a></li><li data-type='method' style='display: none;'><a href="Agent.html#installFile">installFile</a></li><li data-type='method' style='display: none;'><a href="Agent.html#installProfile">installProfile</a></li><li data-type='method' style='display: none;'><a href="Agent.html#installProvisioningProfile">installProvisioningProfile</a></li><li data-type='method' style='display: none;'><a href="Agent.html#isSSLPinningEnabled">isSSLPinningEnabled</a></li><li data-type='method' style='display: none;'><a href="Agent.html#kill">kill</a></li><li data-type='method' style='display: none;'><a href="Agent.html#listProvisioningProfiles">listProvisioningProfiles</a></li><li data-type='method' style='display: none;'><a href="Agent.html#lockDevice">lockDevice</a></li><li data-type='method' style='display: none;'><a href="Agent.html#preApproveProvisioningProfile">preApproveProvisioningProfile</a></li><li data-type='method' style='display: none;'><a href="Agent.html#profileList">profileList</a></li><li data-type='method' style='display: none;'><a href="Agent.html#ready">ready</a></li><li data-type='method' style='display: none;'><a href="Agent.html#removeProfile">removeProfile</a></li><li data-type='method' style='display: none;'><a href="Agent.html#removeProvisioningProfile">removeProvisioningProfile</a></li><li data-type='method' style='display: none;'><a href="Agent.html#run">run</a></li><li data-type='method' style='display: none;'><a href="Agent.html#runActivity">runActivity</a></li><li data-type='method' style='display: none;'><a href="Agent.html#runFrida">runFrida</a></li><li data-type='method' style='display: none;'><a href="Agent.html#runFridaKill">runFridaKill</a></li><li data-type='method' style='display: none;'><a href="Agent.html#runFridaPs">runFridaPs</a></li><li data-type='method' style='display: none;'><a href="Agent.html#shellExec">shellExec</a></li><li data-type='method' style='display: none;'><a href="Agent.html#shutdown">shutdown</a></li><li data-type='method' style='display: none;'><a href="Agent.html#stat">stat</a></li><li data-type='method' style='display: none;'><a href="Agent.html#tempFile">tempFile</a></li><li data-type='method' style='display: none;'><a href="Agent.html#uninstall">uninstall</a></li><li data-type='method' style='display: none;'><a href="Agent.html#unlockDevice">unlockDevice</a></li><li data-type='method' style='display: none;'><a href="Agent.html#upload">upload</a></li></ul></li><li><a href="Corellium.html">Corellium</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Corellium.html#addProjectKey">addProjectKey</a></li><li data-type='method' style='display: none;'><a href="Corellium.html#createProject">createProject</a></li><li data-type='method' style='display: none;'><a href="Corellium.html#createRole">createRole</a></li><li data-type='method' style='display: none;'><a href="Corellium.html#createUser">createUser</a></li><li data-type='method' style='display: none;'><a href="Corellium.html#deleteProjectKey">deleteProjectKey</a></li><li data-type='method' style='display: none;'><a href="Corellium.html#destroyRole">destroyRole</a></li><li data-type='method' style='display: none;'><a href="Corellium.html#destroyUser">destroyUser</a></li><li data-type='method' style='display: none;'><a href="Corellium.html#files">files</a></li><li data-type='method' style='display: none;'><a href="Corellium.html#generateApiToken">generateApiToken</a></li><li data-type='method' style='display: none;'><a href="Corellium.html#getProject">getProject</a></li><li data-type='method' style='display: none;'><a href="Corellium.html#getTeam">getTeam</a></li><li data-type='method' style='display: none;'><a href="Corellium.html#getTeamsAndUsers">getTeamsAndUsers</a></li><li data-type='method' style='display: none;'><a href="Corellium.html#getToken">getToken</a></li><li data-type='method' style='display: none;'><a href="Corellium.html#getUser">getUser</a></li><li data-type='method' style='display: none;'><a href="Corellium.html#login">login</a></li><li data-type='method' style='display: none;'><a href="Corellium.html#projectKeys">projectKeys</a></li><li data-type='method' style='display: none;'><a href="Corellium.html#projectNamed">projectNamed</a></li><li data-type='method' style='display: none;'><a href="Corellium.html#projects">projects</a></li><li data-type='method' style='display: none;'><a href="Corellium.html#removeApiToken">removeApiToken</a></li><li data-type='method' style='display: none;'><a href="Corellium.html#roles">roles</a></li><li data-type='method' style='display: none;'><a href="Corellium.html#supported">supported</a></li><li data-type='method' style='display: none;'><a href="Corellium.html#teams">teams</a></li><li data-type='method' style='display: none;'><a href="Corellium.html#users">users</a></li></ul></li><li><a href="Input.html">Input</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Input.html#delay">delay</a></li><li data-type='method' style='display: none;'><a href="Input.html#press">press</a></li><li data-type='method' style='display: none;'><a href="Input.html#pressRelease">pressRelease</a></li><li data-type='method' style='display: none;'><a href="Input.html#release">release</a></li><li data-type='method' style='display: none;'><a href="Input.html#swipeTo">swipeTo</a></li><li data-type='method' style='display: none;'><a href="Input.html#tap">tap</a></li><li data-type='method' style='display: none;'><a href="Input.html#touch">touch</a></li><li data-type='method' style='display: none;'><a href="Input.html#touchUp">touchUp</a></li></ul></li><li><a href="Instance.html">Instance</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Instance.html#_waitFor">_waitFor</a></li><li data-type='method' style='display: none;'><a href="Instance.html#agent">agent</a></li><li data-type='method' style='display: none;'><a href="Instance.html#clearCoreTraceFilter">clearCoreTraceFilter</a></li><li data-type='method' style='display: none;'><a href="Instance.html#clearCoreTraceLog">clearCoreTraceLog</a></li><li data-type='method' style='display: none;'><a href="Instance.html#clearPanics">clearPanics</a></li><li data-type='method' style='display: none;'><a href="Instance.html#compressAndUploadImage">compressAndUploadImage</a></li><li data-type='method' style='display: none;'><a href="Instance.html#console">console</a></li><li data-type='method' style='display: none;'><a href="Instance.html#consoleLog">consoleLog</a></li><li data-type='method' style='display: none;'><a href="Instance.html#deleteImage">deleteImage</a></li><li data-type='method' style='display: none;'><a href="Instance.html#deleteIotFirmware">deleteIotFirmware</a></li><li data-type='method' style='display: none;'><a href="Instance.html#deleteKernel">deleteKernel</a></li><li data-type='method' style='display: none;'><a href="Instance.html#destroy">destroy</a></li><li data-type='method' style='display: none;'><a href="Instance.html#disableExposedPort">disableExposedPort</a></li><li data-type='method' style='display: none;'><a href="Instance.html#downloadCoreTraceLog">downloadCoreTraceLog</a></li><li data-type='method' style='display: none;'><a href="Instance.html#enableExposedPort">enableExposedPort</a></li><li data-type='method' style='display: none;'><a href="Instance.html#executeFridaScript">executeFridaScript</a></li><li data-type='method' style='display: none;'><a href="Instance.html#finishRestore">finishRestore</a></li><li data-type='method' style='display: none;'><a href="Instance.html#finishUpgrade">finishUpgrade</a></li><li data-type='method' style='display: none;'><a href="Instance.html#fridaConsole">fridaConsole</a></li><li data-type='method' style='display: none;'><a href="Instance.html#getCoreTraceThreadList">getCoreTraceThreadList</a></li><li data-type='method' style='display: none;'><a href="Instance.html#getImages">getImages</a></li><li data-type='method' style='display: none;'><a href="Instance.html#getPeripherals">getPeripherals</a></li><li data-type='method' style='display: none;'><a href="Instance.html#message">message</a></li><li data-type='method' style='display: none;'><a href="Instance.html#messageRaw">messageRaw</a></li><li data-type='method' style='display: none;'><a href="Instance.html#modifyBootOptions">modifyBootOptions</a></li><li data-type='method' style='display: none;'><a href="Instance.html#modifyPeripherals">modifyPeripherals</a></li><li data-type='method' style='display: none;'><a href="Instance.html#networkMonitor">networkMonitor</a></li><li data-type='method' style='display: none;'><a href="Instance.html#newAgent">newAgent</a></li><li data-type='method' style='display: none;'><a href="Instance.html#newNetworkMonitor">newNetworkMonitor</a></li><li data-type='method' style='display: none;'><a href="Instance.html#panics">panics</a></li><li data-type='method' style='display: none;'><a href="Instance.html#pause">pause</a></li><li data-type='method' style='display: none;'><a href="Instance.html#rate">rate</a></li><li data-type='method' style='display: none;'><a href="Instance.html#reboot">reboot</a></li><li data-type='method' style='display: none;'><a href="Instance.html#rename">rename</a></li><li data-type='method' style='display: none;'><a href="Instance.html#restoreBackup">restoreBackup</a></li><li data-type='method' style='display: none;'><a href="Instance.html#sendInput">sendInput</a></li><li data-type='method' style='display: none;'><a href="Instance.html#setCoreTraceFilter">setCoreTraceFilter</a></li><li data-type='method' style='display: none;'><a href="Instance.html#snapshots">snapshots</a></li><li data-type='method' style='display: none;'><a href="Instance.html#start">start</a></li><li data-type='method' style='display: none;'><a href="Instance.html#startCoreTrace">startCoreTrace</a></li><li data-type='method' style='display: none;'><a href="Instance.html#stop">stop</a></li><li data-type='method' style='display: none;'><a href="Instance.html#stopCoreTrace">stopCoreTrace</a></li><li data-type='method' style='display: none;'><a href="Instance.html#takeScreenshot">takeScreenshot</a></li><li data-type='method' style='display: none;'><a href="Instance.html#takeSnapshot">takeSnapshot</a></li><li data-type='method' style='display: none;'><a href="Instance.html#unpause">unpause</a></li><li data-type='method' style='display: none;'><a href="Instance.html#upgrade">upgrade</a></li><li data-type='method' style='display: none;'><a href="Instance.html#uploadDeviceTree">uploadDeviceTree</a></li><li data-type='method' style='display: none;'><a href="Instance.html#uploadImage">uploadImage</a></li><li data-type='method' style='display: none;'><a href="Instance.html#uploadIotFirmware">uploadIotFirmware</a></li><li data-type='method' style='display: none;'><a href="Instance.html#uploadKernel">uploadKernel</a></li><li data-type='method' style='display: none;'><a href="Instance.html#uploadPartition">uploadPartition</a></li><li data-type='method' style='display: none;'><a href="Instance.html#uploadRamDisk">uploadRamDisk</a></li><li data-type='method' style='display: none;'><a href="Instance.html#waitForLineOnConsole">waitForLineOnConsole</a></li><li data-type='method' style='display: none;'><a href="Instance.html#waitForState">waitForState</a></li><li data-type='method' style='display: none;'><a href="Instance.html#waitForTaskState">waitForTaskState</a></li><li data-type='method' style='display: none;'><a href="Instance.html#waitForUserTask">waitForUserTask</a></li><li data-type='method' style='display: none;'><a href="Instance.html#webplayer">webplayer</a></li></ul></li><li><a href="NetworkMonitor.html">NetworkMonitor</a><ul class='methods'><li data-type='method' style='display: none;'><a href="NetworkMonitor.html#clearLog">clearLog</a></li><li data-type='method' style='display: none;'><a href="NetworkMonitor.html#disconnect">disconnect</a></li><li data-type='method' style='display: none;'><a href="NetworkMonitor.html#handleMessage">handleMessage</a></li><li data-type='method' style='display: none;'><a href="NetworkMonitor.html#isEnabled">isEnabled</a></li><li data-type='method' style='display: none;'><a href="NetworkMonitor.html#start">start</a></li><li data-type='method' style='display: none;'><a href="NetworkMonitor.html#stop">stop</a></li></ul></li><li><a href="Project.html">Project</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Project.html#addKey">addKey</a></li><li data-type='method' style='display: none;'><a href="Project.html#createInstance">createInstance</a></li><li data-type='method' style='display: none;'><a href="Project.html#createRole">createRole</a></li><li data-type='method' style='display: none;'><a href="Project.html#deleteImage">deleteImage</a></li><li data-type='method' style='display: none;'><a href="Project.html#deleteIotFirmware">deleteIotFirmware</a></li><li data-type='method' style='display: none;'><a href="Project.html#deleteKernel">deleteKernel</a></li><li data-type='method' style='display: none;'><a href="Project.html#deleteKey">deleteKey</a></li><li data-type='method' style='display: none;'><a href="Project.html#destroy">destroy</a></li><li data-type='method' style='display: none;'><a href="Project.html#getInstance">getInstance</a></li><li data-type='method' style='display: none;'><a href="Project.html#getToken">getToken</a></li><li data-type='method' style='display: none;'><a href="Project.html#instances">instances</a></li><li data-type='method' style='display: none;'><a href="Project.html#keys">keys</a></li><li data-type='method' style='display: none;'><a href="Project.html#refresh">refresh</a></li><li data-type='method' style='display: none;'><a href="Project.html#roles">roles</a></li><li data-type='method' style='display: none;'><a href="Project.html#setQuotas">setQuotas</a></li><li data-type='method' style='display: none;'><a href="Project.html#uploadImage">uploadImage</a></li><li data-type='method' style='display: none;'><a href="Project.html#uploadIotFirmware">uploadIotFirmware</a></li><li data-type='method' style='display: none;'><a href="Project.html#uploadKernel">uploadKernel</a></li><li data-type='method' style='display: none;'><a href="Project.html#uploadVmfile">uploadVmfile</a></li><li data-type='method' style='display: none;'><a href="Project.html#vpnConfig">vpnConfig</a></li></ul></li><li><a href="Role.html">Role</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Role.html#destroy">destroy</a></li></ul></li><li><a href="Snapshot.html">Snapshot</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Snapshot.html#delete">delete</a></li><li data-type='method' style='display: none;'><a href="Snapshot.html#rename">rename</a></li><li data-type='method' style='display: none;'><a href="Snapshot.html#restore">restore</a></li></ul></li><li><a href="Team.html">Team</a></li><li><a href="User.html">User</a><ul class='methods'><li data-type='method' style='display: none;'><a href="User.html#destroy">destroy</a></li></ul></li><li><a href="WebPlayer.html">WebPlayer</a><ul class='methods'><li data-type='method' style='display: none;'><a href="WebPlayer.html#.sessions">sessions</a></li><li data-type='method' style='display: none;'><a href="WebPlayer.html#destroy">destroy</a></li><li data-type='method' style='display: none;'><a href="WebPlayer.html#refreshSession">refreshSession</a></li></ul></li></ul><h3>Events</h3><ul><li><a href="Instance.html#event:change">change</a></li><li><a href="Instance.html#event:panic">panic</a></li></ul><h3>Global</h3><ul><li><a href="global.html#AppListEntry">AppListEntry</a></li><li><a href="global.html#CommandResult">CommandResult</a></li><li><a href="global.html#FirmwareImage">FirmwareImage</a></li><li><a href="global.html#FridaPsResult">FridaPsResult</a></li><li><a href="global.html#I">I</a></li><li><a href="global.html#Image">Image</a></li><li><a href="global.html#KernelImage">KernelImage</a></li><li><a href="global.html#NetmonEntry">NetmonEntry</a></li><li><a href="global.html#PanicInfo">PanicInfo</a></li><li><a href="global.html#PartitionImage">PartitionImage</a></li><li><a href="global.html#PeripheralData">PeripheralData</a></li><li><a href="global.html#ProjectKey">ProjectKey</a></li><li><a href="global.html#ProjectQuotas">ProjectQuotas</a></li><li><a href="global.html#ProvisioningProfileInfo">ProvisioningProfileInfo</a></li><li><a href="global.html#RateInfo">RateInfo</a></li><li><a href="global.html#Response">Response</a></li><li><a href="global.html#ShellExecResult">ShellExecResult</a></li><li><a href="global.html#StatEntry">StatEntry</a></li><li><a href="global.html#SupportedDevice">SupportedDevice</a></li><li><a href="global.html#ThreadInfo">ThreadInfo</a></li><li><a href="global.html#Token">Token</a></li><li><a href="global.html#UpgradeOptions">UpgradeOptions</a></li><li><a href="global.html#vmmio">vmmio</a></li><li><a href="global.html#WebPlayerFeatureSet">WebPlayerFeatureSet</a></li><li><a href="global.html#WebPlayerSession">WebPlayerSession</a></li></ul>
</nav>

<div id="main">
    

    



    


    <section class="package">
        <h3> </h3>		
    </section>









    



    <section class="readme usertext">
        <article><h1>Corellium API</h1>
<h2>Reference</h2>
<p>Corellium API reference documentation is available <a href="https://corellium.github.io/corellium-api/index.html">here</a>.</p>
<h2>Overview</h2>
<h3>Installation</h3>
<pre class="prettyprint source lang-shell="><code>npm install @corellium/corellium-api
</code></pre>
<h3>Usage</h3>
<pre class="prettyprint source lang-javascript="><code>const { Corellium } = require(&quot;@corellium/corellium-api&quot;);
</code></pre>
<h4>Onsite Customer Usage</h4>
<p>If you're using an on-site appliance rather than our cloud product, there may be a few things that are different. Check with your domain administrator to see if the appliance was set up to use a trusted custom certificate that you machine accepts. If it has not been, you will need to accepted the custom certificate that is generated on install by Corellium. Since this certificate will not be known to a local machine you will either need to export it from the server and trust it, or simply tell the node.js vm that you can safely ignore the certificate chain error.</p>
<p>The easiest way to ignore the certificate is to pass the flag <code>NODE_TLS_REJECT_UNAUTHORIZED=0</code> to the scripts you are running.</p>
<pre class="prettyprint source lang-shell="><code>mkdir test
cd test
npm install @corellium/corellium-api
wget https://github.com/corellium/corellium-api/blob/master/examples/agent-simple.js
&lt;edit agent-simple.js for your local config>
env NODE_TLS_REJECT_UNAUTHORIZED=0 node agent-simple.js
</code></pre>
<h2>class Corellium</h2>
<h3>new Corellium(options)</h3>
<p>Sets up a new Corellium endpoint to use. Accepted options are:</p>
<ul>
<li><code>options.endpoint</code>: the URL of the endpoint to use</li>
</ul>
<h3>Include one of the following methods of authentication:</h3>
<h4>Username / Password Credentials</h4>
<ul>
<li><code>options.username</code>: username to use for login</li>
<li><code>options.password</code>: password for given username</li>
</ul>
<h4>API Token</h4>
<ul>
<li><code>options.apiToken</code>: user's API token</li>
</ul>
<h4>JWT</h4>
<ul>
<li><code>options.token</code>: user's JWT</li>
</ul>
<pre class="prettyprint source lang-javascript="><code>options.token = {
    token: 'eyJhbGciOiJSUzM4NCIsInR5cCI6IkpXVCJ9...', // JWT
    expiration: '2022-10-21T21:16:53.000Z', 
}
</code></pre>
<h4>TOTP</h4>
<ul>
<li><code>options.totpToken</code>: Timebased One Time Password Token for a given username</li>
</ul>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>let corellium = new Corellium({
    endpoint: 'https://app.corellium.com',
    username: 'username',
    password: 'password',
    totpToken: '12345',
});
</code></pre>
<h3>async login()</h3>
<p>Performs the login on the endpoint using the credentials passed through the constructor.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>await corellium.login();
</code></pre>
<h3>async projects()</h3>
<p>Returns all projects from the connected endpoint as an <code>Array</code>.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>let projects = await corellium.projects();
let project = projects.find(project => project.name === &quot;Demo Project&quot;);
</code></pre>
<p>Line 2 shows how to pick a specific project from the returned map.</p>
<h3>async getProject(projectId)</h3>
<p>Returns the <code>Project</code> with the identifier <code>projectId</code> or <em>undefined</em> if it does not exist.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>let project = await corellium.getProject('b5ef6be5-71a9-4a26-a320-9be182217ac8');
</code></pre>
<h3>async projectNamed(name)</h3>
<p>Returns the <code>Project</code> with the name <code>name</code> or <em>undefined</em> if it does not exist.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>let project = await corellium.projectNamed('Default Project');
</code></pre>
<h3>async supported()</h3>
<p>Returns an <code>Array</code> with all devices that are supported by the endpoint, with their supported firmwares.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>let supported = await corellium.supported();
</code></pre>
<h2>class Project</h2>
<p><strong>Note:</strong> Instances of the class <code>Project</code> are supposed to be created using the <code>Corellium#projects()</code>, <code>Corellium#getProject()</code>, or <code>Corellium#projectNamed()</code> methods.</p>
<h3>Property: name</h3>
<p>Returns the name of the project.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>let name = project.name;
</code></pre>
<h3>Property: quotas</h3>
<p>Returns the quotas of the project. Currently, <code>quotas</code>' only element is <code>cpus</code>.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>// Create map of supported devices.
let supported = {};
(await corellium.supported()).forEach(modelInfo => {
    supported[modelInfo.name] = modelInfo;
});

// Get how many CPUs we're currently using.
let cpusUsed = 0;
instances.forEach(instance => {
    cpusUsed += supported[instance.flavor].quotas.cpus;
});

console.log('Used: ' + cpusUsed + '/' + project.quotas.cpus);
</code></pre>
<h3>async instances()</h3>
<p>Returns an <code>Array</code> of <code>Instance</code> objects of all virtual machine instances.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>let instances = await project.instances();
let instance = instances.find(instance => instance.name === 'Test-Device');
</code></pre>
<p>Line 2 shows how to select a specific instance by name from the returned instances.</p>
<h3>async getInstance(id)</h3>
<p>Returns the instance identified by <code>id</code>.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>let instance = project.getInstance('a9212122-40b0-1387-7feb-7a721916580d');
</code></pre>
<h3>async createInstance(options)</h3>
<p>Creates a new instance with the given options. The following options are supported:</p>
<ul>
<li><code>options.name</code>: The name of the new Instance.</li>
<li><code>options.flavor</code>: The flavor of the <code>Instance</code> that is being created.
<ul>
<li>The following flavors are supported for Android:
<ul>
<li><code>ranchu</code> (for Generic Android devices)</li>
<li>The following Android devices are &quot;frames&quot; which will change the screen size and dpi
<ul>
<li><code>google-nexus-4</code></li>
<li><code>google-nexus-5</code></li>
<li><code>google-nexus-5x</code></li>
<li><code>google-nexus-6</code></li>
<li><code>google-nexus-6p</code></li>
<li><code>google-nexus-9</code></li>
<li><code>google-pixel</code></li>
<li><code>google-pixel-2</code></li>
<li><code>google-pixel-3</code></li>
<li><code>htc-one-m8</code></li>
<li><code>huawei-p8</code></li>
</ul>
</li>
</ul>
</li>
<li>The following flavors are supported for iOS:
<ul>
<li><code>iphone6</code></li>
<li><code>iphone6plus</code></li>
<li><code>ipodtouch6</code></li>
<li><code>ipadmini4wifi</code></li>
<li><code>iphone6s</code></li>
<li><code>iphone6splus</code></li>
<li><code>iphonese</code></li>
<li><code>iphone7</code></li>
<li><code>iphone7plus</code></li>
<li><code>iphone8</code></li>
<li><code>iphone8plus</code></li>
<li><code>iphonex</code></li>
<li><code>iphonexs</code></li>
<li><code>iphonexsmax</code></li>
<li><code>iphonexsmaxww</code></li>
<li><code>iphonexr</code></li>
<li><code>iphone11</code></li>
<li><code>iphone11pro</code></li>
<li><code>iphone11promax</code></li>
<li><code>iphonese2</code></li>
<li><code>iphone12m</code></li>
<li><code>iphone12</code></li>
<li><code>iphone12p</code></li>
<li><code>iphone12pm</code></li>
<li><code>iphone13</code></li>
<li><code>iphone13m</code></li>
<li><code>iphone13p</code></li>
<li><code>iphone13pm</code></li>
</ul>
</li>
</ul>
</li>
<li><code>options.os</code>: The software version, e.g. <code>14.3</code> for iOS, or <code>11.0.0</code> for Android</li>
<li><code>options.patches</code>: The following values are supported:
<ul>
<li><code>jailbroken</code> The instance should be jailbroken (default).</li>
<li><code>nonjailbroken</code> The instance should not be jailbroken.</li>
<li><code>corelliumd</code> The instance should not be jailbroken but should profile API agent.</li>
</ul>
</li>
<li><code>options.bootOptions</code>: Various boot options
<ul>
<li><code>options.bootOptions.kernelSlide</code>: Change the Kernel slide value for an iOS device. When not set, the slide will default to zero. When set to an empty value, the slide will be randomized.</li>
<li><code>options.bootOptions.udid</code>: Predefined Unique Device ID (UDID) for iOS device</li>
<li><code>options.bootOptions.screen</code>: Change the screen metrics for Ranchu devices <code>XxY[:DPI]</code>, e.g. <code>720x1280:280</code></li>
<li><code>options.bootOptions.additionalTags[]</code>: An array of addition features to utilize for the device, valid options include
<ul>
<li><code>kalloc</code>: Enable kalloc/kfree trace access via GDB (Enterprise only)</li>
<li><code>gpu</code>: Enable cloud GPU acceleration (Extra costs incurred, cloud only)</li>
<li><code>no-keyboard</code> : Enable keyboard passthrough from web interface</li>
<li><code>nodevmode</code> : Disable developer mode on iOS16 (and greater)</li>
<li><code>sep-cons-ext</code> : Patch SEPOS to print debug messages to console</li>
<li><code>iboot-jailbreak</code> : Patch iBoot to disable signature checks</li>
<li><code>llb-jailbreak</code> : Patch LLB to disable signature checks</li>
<li><code>rom-jailbreak</code> : Patch BootROM to disable signature checks</li>
</ul>
</li>
<li><code>options.bootOptions.kernel</code>: Custom kernel to pass to the device on creation</li>
<li><code>options.bootOptions.vmmio[]</code>: Paremeters to export a VM address space range (and IRQ &amp; DMA functionality) over TCP to different models running on different machines or inside a different VM
<ul>
<li><code>start</code>: start address for beginning of vMMIO range</li>
<li><code>size</code>: size of the range to use for vMMIO</li>
<li><code>irq</code>: system IRQs, 1-16 ranges must be specified</li>
<li><code>port</code>: tcp port for vMMIO usage</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>// create instance
let instance = await project.createInstance({
    'name': 'Test Device',
    'flavor': 'ranchu',
    'os': '11.0.0',
    'bootOptions': {
        'screen': '720x1280:280',
    },
});
// wait for the instance to finish restoring
await instance.finishRestore();
</code></pre>
<h2>class Instance</h2>
<p><strong>Note:</strong> instances of class <code>Instance</code> are only supposed to be retrieved by <code>Project#instances()</code>, <code>Project#getInstance()</code>, or <code>Project#createInstance</code>.</p>
<h3>Property: name</h3>
<p>The name of the instance.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>let instances = await project.instances();
let instance = instances[0];
console.log(&quot;Using &quot; + instance.name);
</code></pre>
<h3>Property: state</h3>
<p>Returns the state of the <code>Instance</code>.</p>
<p>Valid states are:</p>
<ul>
<li><code>on</code>: The <code>Instance</code> is running.</li>
<li><code>off</code>: The <code>Instance</code> is not running.</li>
<li><code>creating</code>: The <code>Instance</code> is being created.</li>
<li><code>deleting</code>: The <code>Instance</code> is being deleted.</li>
</ul>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>await instance.start();
await instance.waitForState('on');
assert.equal(instance.state, 'on');
</code></pre>
<p>See also: <code>Instance.waitForState()</code></p>
<h3>Property: flavor</h3>
<p>Returns the flavor of the <code>Instance</code>.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>let instances = await project.instances();
instances.forEach(instance => {
    console.log(instance.name + ': ' + instance.flavor);
});
</code></pre>
<h3>async rate()</h3>
<p>Returns the cost, in microcents, for the instance in the on and off state. Instances are charged $0.25 / day for storage (off) and $0.25 per core per hour (on).</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>let rateInfo = await instance.rate();

// dollars = rate * seconds / microcents / cents
console.log(`instance on for 24 hours: $${(rateInfo.onRateMicrocents * (60 * 60 * 24) / 1000000 / 100).toFixed(2)} USD`)
console.log(`instance off for 24 hours: $${(rateInfo.offRateMicrocents * (60 * 60 * 24) / 1000000 / 100).toFixed(2)} USD`)
</code></pre>
<p>Output:</p>
<pre class="prettyprint source lang-text="><code>instance on for 24 hours: $36.00 USD
instance off for 24 hours: $0.25 USD
</code></pre>
<h3>async rename(name)</h3>
<p>Renames an <code>Instance</code> to <code>name</code>.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>let instances = await project.instances();
let instance = instances.find(instance => instance.name === 'Test-Device');
await instance.rename('Demo-Device');
</code></pre>
<h3>async modifyPeripherals(peripheralData)</h3>
<p>Modify the a <code>PeripheralData</code> object for the current <code>Instance</code>. This is the peripheral/sensor
data which is sent to the device hardware.</p>
<p>Currently only supported for Android devices.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>const instances = await project.instances();
const instance = instances.find(instance => instance.name == 'foo');
await instance.modifyPeripherals({
    &quot;gpsToffs&quot;: &quot;0.000000&quot;,
    &quot;gpsLat&quot;: &quot;37.414300&quot;,
    &quot;gpsLon&quot;: &quot;-122.077400&quot;,
    &quot;gpsAlt&quot;: &quot;45.000000&quot;,
    &quot;acOnline&quot;: &quot;1&quot;,
    &quot;batteryPresent&quot;: &quot;1&quot;,
    &quot;batteryStatus&quot;: &quot;discharging&quot;,
    &quot;batteryHealth&quot;: &quot;overheat&quot;,
    &quot;batteryCapacity&quot;: &quot;99.000000&quot;,
    &quot;acceleration&quot;: &quot;0.000000,9.810000,0.000000&quot;,
    &quot;gyroscope&quot;: &quot;0.000000,0.000000,0.000000&quot;,
    &quot;magnetic&quot;: &quot;0.000000,45.000000,0.000000&quot;,
    &quot;orientation&quot;: &quot;0.000000,0.000000,0.000000&quot;,
    &quot;temperature&quot;: &quot;25.000000&quot;,
    &quot;proximity&quot;: &quot;50.000000&quot;,
    &quot;light&quot;: &quot;20.000000&quot;,
    &quot;pressure&quot;: &quot;1013.250000&quot;,
    &quot;humidity&quot;: &quot;55.000000&quot;
 }));
</code></pre>
<h3>async getPeripherals()</h3>
<p>Return a <code>Promise</code> of a <code>PeripheralData</code> object for the current <code>Instance</code>.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>let peripherals = await instance.getPeripherals();
console.log(peripherals);
</code></pre>
<h3>async snapshots()</h3>
<p>Returns an <code>Array</code> of <code>Snapshot</code> objects with the snapshots for the current <code>Instance</code>.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>let snapshots = instance.snapshots();
snapshots.forEach(snapshot => {
    console.log(snapshot.name, snapshot.created);
});
</code></pre>
<h3>async takeSnapshot(name)</h3>
<p>Creates a snapshot named <code>name</code> of an <code>Instance</code>. Returns an instance of <code>Snapshot</code>.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>await instance.takeSnapshot('before-test');
</code></pre>
<h3>async consoleLog()</h3>
<p>Returns the current console log of an <code>Instance</code>.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>console.log(await instance.consoleLog());
</code></pre>
<h3>async panics()</h3>
<p>Returns recorded panics of an <code>Instance</code>.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>console.log(await instance.panics());
</code></pre>
<p>See also: <code>Event: panic</code></p>
<h3>async clearPanics()</h3>
<p>Clears recorded panics of an <code>Instance</code>.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>await instance.clearPanics();
</code></pre>
<p>See also: <code>Event: panic</code></p>
<h3>async agent()</h3>
<p>Returns an <code>Agent</code> instance for the <code>Instance</code>.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>let agent = await instance.agent();
await agent.ready();
</code></pre>
<h3>async newAgent()</h3>
<p>Creates an additional <code>Agent</code> connection to the <code>Instance</code>. This is required for agent tasks that do not actually finish, like <code>Agent#crashes()</code>.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>let crashListener = await instance.newAgent();
crashListener.crashes('com.corellium.demoapp', (err, crashReport) => {
    if (err) {
        console.error(err);
        return;
    }
    console.log(crashReport);
});
</code></pre>
<h3>async console()</h3>
<p>Returns a node stream for the <code>Instance</code>'s console.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>let consoleStream = await instance.console();
consoleStream.pipe(process.stdout);
</code></pre>
<h3>async start()</h3>
<p>Starts an <code>Instance</code>.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>await instance.start();
</code></pre>
<h3>async stop()</h3>
<p>Stops an <code>Instance</code>.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>await instance.stop();
</code></pre>
<h3>async reboot()</h3>
<p>Reboots an <code>Instance</code>.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>await instance.reboot();
</code></pre>
<h3>async destroy()</h3>
<p>Destroys an <code>Instance</code>.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>// delete all instances of the project
let instances = await project.instances();
instances.forEach(instance => {
    instance.destroy();
});
</code></pre>
<h3>async getCoreTraceThreadList()</h3>
<p>Returns array of threads in the following format:</p>
<pre class="prettyprint source"><code>[
	{ pid, kernelId, name, threads: [ { tid, kernelId }, ... ] },
	...
]
</code></pre>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>let procList = await instance.getCoreTraceThreadList();
for (let p of procList) {
	console.log(p.pid, p.kernelId, p.name);
	for (let t of p.threads) {
		console.log(t.tid, t.kernelId);
	}
}
</code></pre>
<h3>async setCoreTraceFilter(pids, names, tids)</h3>
<p>Creates CoreTrace filter from array of PIDs, TIDs and process names.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>await instance.setCoreTraceFilter([111, 222], [&quot;proc_name&quot;], [333]);
</code></pre>
<h3>async clearCoreTraceFilter()</h3>
<p>Clears CoreTrace filter.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>await instance.clearCoreTraceFilter();
</code></pre>
<h3>async startCoreTrace()</h3>
<p>Starts CoreTrace capture.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>await instance.startCoreTrace();
</code></pre>
<h3>async stopCoreTrace()</h3>
<p>Stops CoreTrace capture.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>await instance.stopCoreTrace();
</code></pre>
<h3>async downloadCoreTraceLog()</h3>
<p>Returns captured CoreTrace data.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>let trace = await instance.downloadCoreTraceLog();
console.log(trace.toString());
</code></pre>
<h3>async clearCoreTraceLog()</h3>
<p>Clears captured CoreTrace data.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>await instance.clearCoreTraceLog();
</code></pre>
<h3>async fridaConsole()</h3>
<p>Returns a node stream for the <code>Instance</code>'s FRIDA console.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>let consoleStream = await instance.fridaConsole();
consoleStream.pipe(process.stdout);
</code></pre>
<h3>async executeFridaScript(filePath)</h3>
<p>Execute installed FRIDA script with path.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>await instance.executeFridaScript(&quot;/data/corellium/frida/scripts/script.js&quot;);
</code></pre>
<h3>async takeScreenshot()</h3>
<p>Instructions the <code>Instance</code> to create a screenshot of the device screen. Returns a <code>Buffer</code> with PNG data.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>let screenshot = await instance.takeScreenshot();
fs.writeFileSync('screenshot.png', screenshot);
</code></pre>
<h3>async finishRestore()</h3>
<p>Waits for a device to finish restoring.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>await instance.finishRestore();
</code></pre>
<p>See also the example at <code>Project#createInstance()</code></p>
<h3>async waitForState(state)</h3>
<p>Waits for the <code>Instance</code> to switch to a specific state. For valid states, see <code>Property: state</code>.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>await instance.waitForState('on');
</code></pre>
<h3>Event: change</h3>
<p><code>Instance</code> emits a <code>change</code> event when its info changes, e.g. when the instance is renamed or its state changes.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>instance.on('change', async () => {
    console.log(instance.id, instance.name, instance.state);
});
</code></pre>
<h3>Event: panic</h3>
<p><code>Instance</code> emits a <code>panic</code> event when a panic occurred.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>instance.on('panic', async () => {
    console.log('Panic detected!');

    // get the panic log(s)
    console.log(await instance.panics());

    // Download the console log.
    console.log(await instance.consoleLog());

    // Clear the panic log.
    await instance.clearPanics();

    // Reboot the instance.
    await instance.reboot();
});
</code></pre>
<h2>class Agent</h2>
<p><strong>Note:</strong> Instances of the class <code>Agent</code> are only supposed to be retrieved with <code>Instance#agent()</code> or <code>Instance#newAgent()</code>.</p>
<h3>async ready()</h3>
<p>Waits for the agent to be ready to use. This essentially means that it will wait until Springboard has launched.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>let agent = await instance.agent();
await agent.ready();
</code></pre>
<h3>async appList()</h3>
<p>Returns an <code>Array</code> of installed apps.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>let appList = await agent.appList();
for (app of appList) {
    console.log('Found installed app ' + app['bundleID']);
}
</code></pre>
<h3>async run(bundleID)</h3>
<p>Launches the app with the given <code>bundleID</code>.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>await agent.run(&quot;com.corellium.demoapp&quot;);
</code></pre>
<h3>async kill(bundleID)</h3>
<p>Kills the underlying process of the app identified by <code>bundleID</code>.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>await agent.kill(&quot;com.corellium.demoapp&quot;);
</code></pre>
<h3>async install(path, [progress])</h3>
<p>Installs an app, where the packaged app needs to be available on the VMs filesystem at <code>path</code>. The optional <code>progress</code> parameter expects a callback function with signature <code>(progress, status)</code>, where <code>progress</code> is the percentage as float, and <code>status</code> a string with the current status of the installation progress.</p>
<p>To upload a file to the VM's filesystem, see <code>Agent#upload()</code>.</p>
<p>See also <code>Agent#installFile()</code> which will handle the file upload on its own.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>await agent.install('/var/tmp/temp.ipa', (progress, status) => {
    console.log(progress, status);
});
</code></pre>
<h3>async installFile(stream, [progress])</h3>
<p>Uploads the packaged app provided through the node stream object <code>stream</code> and installs it on the VM. The optional <code>progress</code> parameter expects a callback function with signature <code>(progress, status)</code>, where <code>progress</code> is the percentage as float, and <code>status</code> a string with the current status of the installation progress.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>await agent.installFile(fs.createReadStream('test.ipa'), (progress, status) => {
    console.log(progress, status);
});
</code></pre>
<h3>async uninstall(bundleID, [progress])</h3>
<p>Uninstalls the app identified by <code>bundleID</code>. The optional <code>progress</code> parameter expects a callback function with signature <code>(progress, status)</code>, where <code>progress</code> is the percentage as float, and <code>status</code> a string with the current status of the uninstallation progress.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>await agent.uninstall('com.corellium.demoapp', (progress, status) => {
    console.log(progress, status);
});
</code></pre>
<h3>async shellExec(cmd)</h3>
<p>Executes a given command shell command on the VM.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>    let response = await agent.shellExec('uname');
    console.log('Output:' + response['output']);
</code></pre>
<h3>async tempFile()</h3>
<p>Returns a temporary random filename on the VMs filesystem that by the time of invocation of this method is guaranteed to be unique.</p>
<p>See example at <code>Agent#upload()</code>.</p>
<h3>async upload(path, stream)</h3>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>let tmpName = await agent.tempFile();
await agent.upload(tmpName, fs.createReadStream('test.ipa'));
</code></pre>
<h3>download(path)</h3>
<p>Downloads the file at <code>path</code> from the VM's filesystem. Returns a node stream object.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>let dl = agent.download('/var/tmp/test.log');
dl.pipe(fs.createWriteStream('test.log'));
</code></pre>
<h3>async deleteFile(path)</h3>
<p>Deletes the file at <code>path</code> on the VM's filesystem.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>await agent.deleteFile('/var/tmp/test.log');
</code></pre>
<h3>async profileList()</h3>
<p>Returns an array of Mobile Configuration profile IDs.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>let profiles = await agent.profileList();
for (p of profiles) {
    console.log('Found configuration profile: ' + p);
}
</code></pre>
<h3>async installProfile(profile)</h3>
<p>Installs Mobile Configuration binary <code>profile</code> to iOS device.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>var profile = fs.readFileSync(path.join(__dirname, &quot;myprofile.mobileconfig&quot;));
await agent.installProfile(profile);
</code></pre>
<h3>async removeProfile(profileID)</h3>
<p>Deletes Mobile Configuration profile with <code>profileID</code>.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>await agent.removeProfile('com.test.myprofile');
</code></pre>
<h3>async getProfile(profileID)</h3>
<p>Gets Mobile Configuration profile binary with <code>profileID</code>.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>var profile = await agent.getProfile('com.test.myprofile');
</code></pre>
<h3>async listProvisioningProfiles()</h3>
<p>Returns an array of Provisioning profile descriptions.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>let profiles = await agent.listProvisioningProfiles();
for (p of profiles) {
    console.log(p['uuid']);
}
</code></pre>
<h3>async installProvisioningProfile(profile, trust)</h3>
<p>Installs Provisioning profile binary <code>profile</code> makes it immediately trusted if <code>trust</code> is set.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>var profile = fs.readFileSync(path.join(__dirname, &quot;embedded.mobileprovision&quot;));
await agent.installProvisioningProfile(profile, true);
</code></pre>
<h3>async removeProvisioningProfile(profileID)</h3>
<p>Deletes Provisioning profile with <code>profileID</code>.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>await agent.removeProvisioningProfile('aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa');
</code></pre>
<h3>async preApproveProvisioningProfile(certID, profileID)</h3>
<p>Approves (makes trusted) profile with <code>certID</code> and <code>profileID</code> which will be installed later in a future for example during app installation via Xcode.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>await agent.preApproveProvisioningProfile('Apple Development: my@email.com (NKJDZ3DZJB)', 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa');
</code></pre>
<h3>crashes(bundleID, callback)</h3>
<p>Subscribes to crash events for a given app identified by <code>bundleID</code>. The callback will be called as soon as the agent found a new crash log. The signature is <code>(err, crashReport)</code> where <code>err</code> is only defined if an error occured setting up or watching for crash logs and <code>crashReport</code> will contain the full crash report data.</p>
<p>Currently this is only available on iOS virtual devices.</p>
<p><strong>Note:</strong> Since this method blocks the communication channel of the agent to wait for crash reports, a new <code>Agent</code> connection should be created with <code>Instance#newAgent()</code>.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>let crashListener = await instance.newAgent();
crashListener.crashes(&quot;com.corellium.demoapp&quot;, (err, crashReport) => {
    if (err) {
        console.error(err);
        return;
    }
    console.log(crashReport);
});
</code></pre>
<h3>async lockDevice()</h3>
<p>Locks the device software-wise.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>await agent.lockDevice();
</code></pre>
<h3>async unlockDevice()</h3>
<p>Unlocks the device software-wise.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>await agent.unlockDevice();
</code></pre>
<h3>async enableUIAutomation()</h3>
<p>Enables UI Automation.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>await agent.enableUIAutomation();
</code></pre>
<h3>async disableUIAutomation()</h3>
<p>Disables UI Automation.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>await agent.disableUIAutomation();
</code></pre>
<h3>async isSSLPinningEnabled()</h3>
<p>Check if SSL pinning is enabled.
By default SSL pinning is disabled.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>let enabled = await agent.isSSLPinningEnabled();
if (enabled) {
    console.log(&quot;enabled&quot;);
} else {
    console.log(&quot;disabled&quot;);
}
</code></pre>
<h3>async enableSSLPinning()</h3>
<p>Enables SSL pinning.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>await agent.enableSSLPinning();
</code></pre>
<h3>async disableSSLPinning()</h3>
<p>Disables SSL pinning.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>await agent.disableSSLPinning();
</code></pre>
<h3>disconnect()</h3>
<p>Disconnects an <code>Agent</code> connection. This is usually only required if a new agent connection has been created and is no longer needed, for example if the <code>crashListener</code> demonstrated in the example at <code>Agent#crashes()</code> is not required anymore.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>// subscribe for crash logs
let crashListener = await instance.newAgent();
crashListener.crashes(&quot;com.corellium.demoapp&quot;, (err, crashReport) => {
    if (err) {
        console.error(err);
        return;
    }
    console.log(crashReport);
});

// wait 15 seconds
let timeoutComplete = null;
new Promise(resolve => {
    timeoutComplete = resolve;
    setTimeout(timeoutComplete, 15000);
});

// crashListener not required anymore
crashListener.disconnect();
</code></pre>
<h3>async runFridaPs()</h3>
<p>Returns processes avialable for FRIDA to attach.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>let procList = await agent.runFridaPs();
let lines = procList.output.trim().split('\n');
// Discard the first two lines.
lines.shift();
lines.shift();
for (const line of lines) {
    const [pid, name] = line.trim().split(/\s+/);
    console.log(pid, name);
}
</code></pre>
<h3>async runFrida(pid, name)</h3>
<p>Attaches FRIDA to the process with <code>pid</code> and <code>name</code>.
Please note that both arguments need to be provided as they are required by the Web UI.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>await agent.runFrida(111, 'myapp');
</code></pre>
<h3>async runFridaKill()</h3>
<p>Detaches FRIDA from current process.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>await agent.runFridaKill();
</code></pre>
<h2>class NetworkMonitor</h2>
<p><strong>Note:</strong> Instances of the class <code>NetworkMonitor</code> are only supposed to be retrieved with <code>Instance#networkMonitor()</code> or <code>Instance#newNetworkMonitor()</code>.</p>
<h3>async handleMessage(handler)</h3>
<p>Install handler for captured Network Monitor data</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>let netmon = await instance.newNetworkMonitor();
netmon.handleMessage((message) => {
    let host = message.request.headers.find(entry => entry.key === 'Host');
    console.log(message.response.status, message.request.method, message.response.body.size, host.value);
});
</code></pre>
<h3>async start()</h3>
<p>Starts capturing Network Monitor data</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>let netmon = await instance.newNetworkMonitor();
netmon.start();
</code></pre>
<h3>async stop()</h3>
<p>Stops capturing Network Monitor data</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>let netmon = await instance.newNetworkMonitor();
netmon.stop();
</code></pre>
<h3>async isEnabled()</h3>
<p>Check if Network Monitor is enabled</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>let enabled = await netmon.isEnabled();
if (enabled) {
    console.log(&quot;enabled&quot;);
} else {
    console.log(&quot;disabled&quot;);
}
</code></pre>
<h3>async clearLog()</h3>
<p>Clears captured Network Monitor data</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>let netmon = await instance.newNetworkMonitor();
netmon.clearLog();
</code></pre>
<h2>class Snapshot</h2>
<p><strong>Note:</strong> Instances of the class <code>Snapshot</code> are only supposed to be retrieved with <code>Instance#snapshots()</code> or <code>Instance#takeSnapshot()</code>.</p>
<h3>Property: name</h3>
<p>Name of the snapshot.</p>
<h3>Property: created</h3>
<p>The time the snapshot was created.</p>
<h3>Property: fresh</h3>
<p>Tells wether a snapshot is fresh or not.</p>
<p>A snapshot will be automatically created after the initial restore of an <code>Instance</code> in which case it is considered fresh.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>let snapshots = await instance.snapshots();
let freshSnapshot = snapshots.find(snapshot => snapshot.fresh);
await freshSnapshot.restore();
</code></pre>
<h3>async rename(name)</h3>
<p>Renames a snapshot to <code>name</code>.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>let snapshots = await instance.snapshots();
let snapshot = snapshots.find(snapshot => snapshot.name === 'Test 1');
if (snapshot) {
    await snapshot.rename('Test 1 new');
}
</code></pre>
<h3>async restore()</h3>
<p>Restores a snapshot.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>let snapshots = await instance.snapshots();
let snapshot = snapshots.find(snapshot => snapshot.name === 'Pre-Test 1');
if (snapshot) {
    await snapshot.restore();
}
</code></pre>
<h3>async delete()</h3>
<p>Deletes a snapshot.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript="><code>let snapshots = await instance.snapshots();
snapshots.forEach(snapshot => {
    console.log(&quot;Deleting snapshot &quot; + snapshot.name)
    snapshot.delete();
});
</code></pre></article>
    </section>






    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.10</a> on Thu Apr 20 2023 00:01:44 GMT+0000 (Coordinated Universal Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>

<script src="scripts/search.js" defer></script>


<script src="scripts/collapse.js" defer></script>


</body>
</html>